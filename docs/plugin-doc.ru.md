# Описание работы с плагином

## Настройка

На экране настроек можно задать:

* Язык интерфейса. Применяется сразу же. Запоминается в локальном хранилище браузера.
* Период для анализа: это время за которое проводится анализ задач. 
  Задачи, завершенные раньше начала периода - игнорируются.
* Фильры: задачи на доске будет фильтроваться по выбранным фильтрам. 
  Удобно завести фильтры "Срочные" и "Не срочные" задачи, чтобы строить статистику по разным
  типам задач.
* Линии: выберите линии, которые будут участвовать в расчёте статистики.
* Колонки: распределение колонок по типам.
  * Взаимоисключающие:
    * Пропустить: не учитывать колонку в расчёте. На kanban-доске это, обычно, скрытая колонка бэклога.
    * В работе: колонки, указывающие на статусы задач, над которыми ведётся работа (анализ, разработка, тестирование).
    * В ожидании: колонки, указывающие на статусы задач, которые ждут, когда их возьмут на следующий этап работы. 
      Это колонки - буферы.
    * Готово: колонки, указывающие на статусы задач после их завершения.
  * Время поставки: это колонки, формирующие lead time.
    Обычно это сплошная линия от первого статуса после принятия обязательства командой (включая его)
    по последний статус перед отдачей обязательства (включая его). 
    Следующий по порядку статус находится уже после отдачи обязательства.
  * Время цикла: то же, что и время поставки, но используется для определения, например, цикла разработки. 
    Используется, что бы отдельно оценить время разработки, а так же, чтобы проводить триаж задач перед разработкой.
  * Поле для размера задач: поле типа Option в котором перечислены значения размера задачи/гипотезы.
    Используется, чтобы более точно строить предсказания по времени выполнения задач схожих размеров.
  * Поле для функции жизненного цикла получения ценности: поле типа Option в котором перечислены 11 значений
    [функций жизненного цикла получения ценности](#паттерн-функции-жизненного-цикла-получения-ценности).
    Значения обязательно должны начинаться с цифрового кода, так плагин определит значение вне зависимости от языка.
  * Поле для коэффициента времени жизни: поле типа Option в котором перечислены 5 значений коэффициента времени жизни 
    (отношения времени производства к тому как долго это будет приносить прибыль). 
    Значения должны содержать строки "2:1", "1:1", "1:2", "1:5" и "1:10", так как по ним плагин 
    определит значение вне зависимости от языка.
  * Поле для желаемой даты поставки: поле типа date или datetime в котором хранится желаемая дата поставки в 
    рамках SLA/SLE. Имейте в виду, что это не дата дедлайна. Это мягкая дата: задержка поставки после этой 
    даты не принесёт больших убытков или реакции надзорных органов.
  * Поле для даты дедлайна:  поле типа date или datetime в котором хранится дата, после которой задержка поставки
    принесёт большие убытки или реакцию надзорных органов.
    
## Как использовать диаграммы

Описание работы с экранами плагина. 

### Главный экран

На этом экране собраны все основные метрики Kanban-метода.

По оси X отложены периоды агрегирования.
Все метрики собираются по дням на границу суток по локальному времени пользователя и агрегируются в период.
Например, если в дате 23.02.2023 есть значения: 4 в пропускной способности, 34 поставка, 32 цикл, 26% эффективность, 
74% потери, 89.47 средний WIP, то это означает, что в период, закончившийся 23.02.2023 (допустим это неделя):
* средний ежедневный объём незавершенной работы за 7 дней был 89.47
* за это время команда завершила 4 задачи
* эти задачи в среднем провели 26% времени в колонках с работой
* эти задачи в среднем провели 74% времени в колонках с ожиданием
* среднее время поставки (lead time) этих задач был 34 дня (календарных)
* среднее время цикла (допустим цикла разработки) этих задач был 32 дня (календарных)

Если вы смотрите доску с бизнес-целями, то время поставки можно задать от момента, 
когда мы взяли идею в проработку до релиза. И тогда это будет time-to-market.
Если при этом время цикла задать от принятия командой разработки цели в груминг до релиза, то мы получим время цикла 
разработки и бонусом получим триаж задач перед отдачей их в команду разработки.

### Общий WIP

На этом экране можно оценить динамику агрегированных по периоду значений подневных объёмов незавершенной работы.

А так же понять сколько времени команда будет реализовывать текущую незавершенную работу исходя
из средней, медианы и 75 персентили пропускной способности.
Если у вас период анализа 2 недели, а текущий WIP команда будет реализовывать 30 периодов, 
то у меня к вам вопрос: а точно надо столько незавершенки в которую уже вложены силы, 
что её придется делать больше года?


### WIP по колонкам

Тут чуть больше смысла, чем в общем WIP.

Здесь можно оценить сколько было задач в каждой колонке агрегировано.

Например, глядя на медианы или моды можно оценить типичные объемы незавершенной работы в каждой из колонок.
Оценить их динамику.
Так же эти графики покажут узкие места: перед ними в буферах всегда много работы. 
Конечно при условии, что в буферных колонках нет WIP лимитов.

А глядя на минимумы в буферных колонках можно следить за тем, что вы слишком зажали WIP лимиты: 
если минимум перед узким местом равен нулю, то, скорее всего, у вас узкое место простаивало из-за отсутствия работы.  

### Время поставки и цикла

Здесь можно оценить тренды и размах времён поставки и цикла.

### Среднее время по колонкам

Показывает сколько в среднем времени проводили выполненные задачи в каждой из колонок.
Позволяет оценить, где задачи тратят больше всего времени в процессе производства.

Можно смотреть как процентное отношение, так и посмотреть абсолютные значения, чтобы оценить динамику.

### Распределение времени выполнения

Диаграмма, на основе которой можно делать вероятностный прогноз о времени выполнения задач. 
По горизонтальной оси откладывается Lead Time, по вертикальной — количество задач, выполненных с таким Lead Time.

На основе полученной гистограммы можно вычислить вероятность завершения задач за определенный Lead Time, 
подробнее об этом — [в статье](https://scrumtrek.ru/blog/kanban/8389/kanban-dlya-scrum-komand/#%D0%94%D0%BE%D1%81%D1%82%D0%BE%D0%B2%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%BE%D1%86%D0%B5%D0%BD%D0%BA%D0%B0_%D1%81%D1%80%D0%BE%D0%BA%D0%BE%D0%B2_%D0%B7%D0%B0%D0%B4%D0%B0%D1%87)

### Контрольная диаграмма

График, показывающий дисперсию времени выполнения задач (Lead Time). 
Используется для поиска и анализа причин, приводящих к нестабильности рабочего процесса.

Как раз для поиска сделана табличка: она позволяет найти задачи, которые вы ещё не обсудили 
(указываем число периодов от предыдущей встречи). Так же задаём порог в процентилях времени, 
превышение которого записывает задачу в подозрительные.
На графике область поиска (красная) будет показана для времени поставки.
Но поиск будет произведён для времени для каждой колонки, а так же времени поставки и времени цикла.

В каждом отдельном случае попавшиеся задачи добавляются в список "победителей" в соответствующий столбец.
Это позволит проводить анализ задач, которые долго находились в узком месте, чтобы оптимизировать процессы в нём.  

Но, как правило, задача, которая "выиграла главный приз": попалась в красной зоне lead time - выигрывает и малые номинации.

Так же внизу страницы появляется список "призёров", отсортированных, по количеству "призов". 

### Анализ по WIP

В теории, если у вас процессы стабильные, то эти графики покажут вам, что чем больше незавершенной работы (WIP),
тем больше время поставки и цикла, ниже эффективность (так как задачи дольше ждут в колонках ожидания).

### Триаж

Триаж - техника, позволяющая по нескольким формальным признакам быстро определить 
какую задачу делать прямо сейчас, какую позже, а какую и вовсе отложить.

#### Проведение триажа 

Подробнее про проведение триажа и описание сущностей можно почитать  
[на сайте сообщества Канбан-Практиков: Kanban Russia](https://kanbanguide.ru/opredelite-svoi-klassy-obsluzhivaniya-s-pomoshhyu-triazh-tablicz-podcast-kanban-talks-epizod-%E2%84%96-7/)

Для проведения триажа необходимо в конфигурации указать три обязательных поля и одно опциональное: 
* (_**Обязательно**_) Поле в котором сохраняется 
  [паттерн функции жизненного цикла получения ценности](#паттерн-функции-жизненного-цикла-получения-ценности).
  Значения может не быть, тогда: 
  * если есть дедлайн, то используется шаблон 
    "[Разовая возможность с истечением срока](#01-разовая-возможность-с-истечением-срока)"
  * иначе, если ксть желаемая дата поставки, то используется шаблон
  "[Постоянный уровень](#08-постоянный-уровень)"
  * иначе используется шаблон "[Спад в последнюю минуту](#11-спад-в-последнюю-минуту)".
* (_**Обязательно**_) Поле в котором сохраняется желаемая дата поставки.
  Это даты, когда функционал необходимо выкатить на клиента с точки зрения бизнеса.
  Даты может не быть, тогда используется диапазон страта `Очень рано`.  
* (_**Обязательно**_) Поле в котором сохраняется дата дедлайна.
  Это дата, после которой задержка выкатки функционала критически влияет на прибыль.
  Сюда можно отнести дату вступления в действие каких-либо регуляторных актов.
  Если дата задана, то для триажа используется ожидание клиентов типа `Дедлайн` 
  Даты может не быть, тогда используется диапазон старта `Очень рано` и 
  для триажа используется ожидание клиентов типа `В рамках SLA/SLE`.
* (_Опционально_) Поле в котором сохраняется оценка размера гипотезы/задачи.
  Крайне рекомендуется указать и заполнять это поле, так как статистика по решению
  подобных задач даст более точный прогноз старта.

##### Паттерн функции жизненного цикла получения ценности

Для того чтобы система могла автоматически определить значение, необходимо начинать значение поля с цифр, 
которые укажут на позицию в таблице триажа. После цифр может идти любой не цифровой символ, включая пробел.

###### 01 РАЗОВАЯ ВОЗМОЖНОСТЬ С ИСТЕЧЕНИЕМ СРОКА

Эта функция подразумевает, что существует единоразовая возможность получить выгоду (заработать деньги) 
и после этой даты шанс будет упущен.

_Заказчик обращается вам с целью потратить остаток годового бюджета до начала возможностью, нового финансового года.
Вы либо воспользуетесь, либо потеряете сделку._

###### 02 ПРИБЫЛЬ НА ОЧЕНЬ РАННИХ СРОКАХ

80% прибыли получено в первые 20% жизненного цикла.

_Производитель лыж выпускает новую модель каждый год в ноябре, и большая часть лыж продается в первые 3 месяца при
жизненном цикле продукта сроком в 1 год._

###### 03 ПРИБЫЛЬ НА РАННИХ СРОКАХ

80% прибыли получено в первые 50% жизненного цикла.

_Производитель велосипедов выпускает новую модель каждый год в ноябре-декабре, но
большинство продаж происходит в начале сезона, весной, и снижается к концу лета._

###### 04 КОЛОКОЛООБРАЗНАЯ КРИВАЯ С ПРЕИМУЩЕСТВОМ ПЕРВОГО ХОДА

Колоколообразная кривая с преимуществом первого игрока рынка, который это сделал.
Существует сетевой эффект на рынке, который дает преимущество тому, кто первым
реализует функционал или продукт, но последующие игроки рынка этого преимущества  
не получают.

_Такой эффект в первую очередь ассоциируется с технологическими платформами,
такими как операционные системы, стандарты мобильной телефонии, средства обмена
сообщениями и коммуникации, социальные сети._

###### 05 КОЛОКОЛООБРАЗНАЯ КРИВАЯ БЕЗ ПРЕИМУЩЕСТВА ПЕРВОГО ХОДА

Колоколообразная кривая без преимущества у первого,
кто реализовал  функционал или продукт.
Другие участники рынка могут догнать и обогнать первого.

_Первый производитель светодиодных ламп имел преимущество на рынке,
после чего следующему производителю потребовался год, чтобы предложить
эту же технологию. Еще несколько лет понадобилось
остальным производителям, чтобы догнать лидеров.
Тем не менее, первый игрок не имел господствующего положения
на рынке, и это не остановило продажи конкурирующих производителей._

###### 06 ПРИБЫЛЬ  НА ПОЗДНИХ  СРОКАХ

80% прибыли получено в последние 50% жизненного цикла.

_Рекламная кампания отеля к Пасхе начинается сразу после Нового года (жизненный цикл
составляет 90–100дней). Большинство бронирований будет сделано во
второй половине жизненного цикла._

###### 07 ПРИБЫЛЬ НА ОЧЕНЬ ПОЗДНИХ СРОКАХ

80% прибыли получено в последние 20% жизненного цикла.

_Организатор конференций предлагает локальное мероприятие
в регионе, нацеленное на аудиторию из этого географического
округа. Если не предвидится дефицита билетов,
участники скорее всего будут ждать до последних 
20% жизненного цикла прежде, чем купить билет._

###### 08 ПОСТОЯННЫЙ УРОВЕНЬ

Эта функция моделирует преимущества таких вещей, как экономия затрат.

_После выпуска продукта или услуги, расходы сокращаются —
возможно, работники или их вовлечение становится не нужным. 
Как следствие, если бы мы выпустили новый функционал сегодня, то
получили бы сокращение расходов завтра, и сэкономленная сумма
являлась бы фиксированной и постоянной._

###### 09 КОЛОКОЛООБРАЗНАЯ ПРОДЛЕННАЯ КРИВАЯ, УГАСАЮЩИЕ ЖИЗНЕННЫЙ ЦИКЛ И ЛОЯЛЬНОСТЬ

Моделируют продленный, но угасающий жизненный
цикл с падением лояльности со временем. Отображает
ситуации, в которых задержка выпуска продукта,
функционала или услуги, не имеет сильного
негативного влияния по причине лояльности клиентов,
либо эксклюзивности технологии, либо монополии/
ограниченного выбора на рынке.
Однако длительные задержки приводят к сокращению жизненного
цикла и падению лояльности.

_Лояльные клиенты будут ждать, пока их любимый
бренд (например, мобильных телефонов, ноутбуков,
планшетов) не выпустит продукт с новейшей
технологией (например, процессор, видеокарта, камера
и т.д.). Задержка приводит к падению лояльности и
сокращению жизненного цикла продукта, потому что
лежащие в основе устаревшие технологии отойдут в прошлое 
и будут заменены новыми в рамках их собственного 
независимого жизненного цикла._

###### 10 КОЛОКОЛООБРАЗНАЯ КРИВАЯ, ПРОДЛЕННЫЙ ЖИЗНЕННЫЙ  ЦИКЛ, УГАСАЮЩАЯ ЛОЯЛЬНОСТЬ

Моделирует продленный жизненный цикл с падением лояльности со временем.
Отображает ситуации, в которых задержка выпуска продукта, функционала
или услуги не имеет сильного негативного влияния 
по причине, лояльности клиентов, либо закрытости технологии, 
либо монополии / ограниченного выбора на рынке.

_Apple Microsoft могут быть примером, но более  
наглядный – это очередной альбом какой-нибудь
популярной группы, например, Depeche Mode или Coldplay.
Depeche Mode выпускают новый альбом раз 
4 года, но даже если выход задержится, фанаты
все равно будут ждать и в итоге купят альбом.
Однако, лояльность, тем больше падает
чем дольше задержка._

###### 11 СПАД В ПОСЛЕДНЮЮ МИНУТУ

Немедленная прибыль независимо от задержки, однако откладывание на
последний момент приводит к значительному падению реализованной
прибыли.

_Моделирует такой бизнес как реклама концертов популярных артистов.
В какой бы день билеты ни поступили в продажу, они будут распроданы в
течение нескольких часов. Если задержать начало продаж на неделю или
месяц, они все равно будут распроданы. Продажи в любом случае будут
мгновенными, несмотря на задержку, только если мы не запустим билеты
в продажу в последний момент, без объявления концерта._
